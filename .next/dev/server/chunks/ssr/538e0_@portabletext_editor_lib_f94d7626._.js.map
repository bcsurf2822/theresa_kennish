{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"file":"turbopack:///[project]/code/cedesigns/theresa_kennish/node_modules/.pnpm/@portabletext+editor@4.2.2_@portabletext+sanity-bridge@2.0.0_@types+react@19.2.2__@type_9e5c4a470ba434d0a1e40b5f8b2f25a3/node_modules/@portabletext/editor/lib/behaviors/index.js","sources":["file:///Users/benjamincorbett/code/cedesigns/theresa_kennish/node_modules/.pnpm/%40portabletext%2Beditor%404.2.2_%40portabletext%2Bsanity-bridge%402.0.0_%40types%2Breact%4019.2.2__%40type_9e5c4a470ba434d0a1e40b5f8b2f25a3/node_modules/%40portabletext/editor/src/behaviors/behavior.types.action.ts","file:///Users/benjamincorbett/code/cedesigns/theresa_kennish/node_modules/.pnpm/%40portabletext%2Beditor%404.2.2_%40portabletext%2Bsanity-bridge%402.0.0_%40types%2Breact%4019.2.2__%40type_9e5c4a470ba434d0a1e40b5f8b2f25a3/node_modules/%40portabletext/editor/src/behaviors/behavior.types.behavior.ts"],"sourcesContent":["import type {EditorDom} from '../editor/editor-dom'\nimport type {EditorSnapshot} from '../editor/editor-snapshot'\nimport type {PickFromUnion} from '../type-utils'\nimport type {\n  CustomBehaviorEvent,\n  ExternalBehaviorEvent,\n  NativeBehaviorEvent,\n  SyntheticBehaviorEvent,\n} from './behavior.types.event'\n\n/**\n * @beta\n */\nexport type BehaviorAction =\n  | {\n      type: 'execute'\n      event: SyntheticBehaviorEvent\n    }\n  | {\n      type: 'forward'\n      event: NativeBehaviorEvent | SyntheticBehaviorEvent | CustomBehaviorEvent\n    }\n  | {\n      type: 'raise'\n      event: SyntheticBehaviorEvent | CustomBehaviorEvent\n    }\n  | {\n      type: 'effect'\n      effect: (payload: {\n        /**\n         * Send a Behavior Event back into the Editor.\n         *\n         * @example\n         * ```ts\n         * defineBehavior({\n         *   on: '...',\n         *   actions: [\n         *     () => [\n         *       effect(({send}) => {\n         *         doSomethingAsync()\n         *           .then(() => {\n         *             send({\n         *               type: '...',\n         *             })\n         *           })\n         *       })\n         *     ],\n         *   ],\n         * })\n         * ```\n         */\n        send: (event: ExternalBehaviorEvent) => void\n      }) => void\n    }\n\n/**\n * @beta\n */\nexport function execute(\n  event: SyntheticBehaviorEvent,\n): PickFromUnion<BehaviorAction, 'type', 'execute'> {\n  return {type: 'execute', event}\n}\n\n/**\n * @beta\n */\nexport function forward(\n  event: NativeBehaviorEvent | SyntheticBehaviorEvent | CustomBehaviorEvent,\n): PickFromUnion<BehaviorAction, 'type', 'forward'> {\n  return {type: 'forward', event}\n}\n\n/**\n * @beta\n */\nexport function raise(\n  event: SyntheticBehaviorEvent | CustomBehaviorEvent,\n): PickFromUnion<BehaviorAction, 'type', 'raise'> {\n  return {type: 'raise', event}\n}\n\n/**\n * @beta\n */\nexport function effect(\n  effect: PickFromUnion<BehaviorAction, 'type', 'effect'>['effect'],\n): PickFromUnion<BehaviorAction, 'type', 'effect'> {\n  return {type: 'effect', effect}\n}\n\n/**\n * @beta\n */\nexport type BehaviorActionSet<TBehaviorEvent, TGuardResponse> = (\n  payload: {\n    snapshot: EditorSnapshot\n    event: TBehaviorEvent\n    dom: EditorDom\n  },\n  guardResponse: TGuardResponse,\n) => Array<BehaviorAction>\n","import type {BehaviorActionSet} from './behavior.types.action'\nimport type {\n  BehaviorEvent,\n  BehaviorEventTypeNamespace,\n  CustomBehaviorEvent,\n  ResolveBehaviorEvent,\n} from './behavior.types.event'\nimport type {BehaviorGuard} from './behavior.types.guard'\n\n/**\n * @beta\n */\nexport type Behavior<\n  TBehaviorEventType extends\n    | '*'\n    | `${BehaviorEventTypeNamespace}.*`\n    | BehaviorEvent['type'] =\n    | '*'\n    | `${BehaviorEventTypeNamespace}.*`\n    | BehaviorEvent['type'],\n  TGuardResponse = true,\n  TBehaviorEvent extends ResolveBehaviorEvent<TBehaviorEventType> =\n    ResolveBehaviorEvent<TBehaviorEventType>,\n> = {\n  /**\n   * Editor Event that triggers this Behavior.\n   */\n  on: TBehaviorEventType\n  /**\n   * Predicate function that determines if the Behavior should be executed.\n   * Returning a non-nullable value from the guard will pass the value to the\n   * actions and execute them.\n   */\n  guard?: BehaviorGuard<TBehaviorEvent, TGuardResponse>\n  /**\n   * Array of Behavior Action sets.\n   * Each set represents a step in the history stack.\n   */\n  actions: Array<BehaviorActionSet<TBehaviorEvent, TGuardResponse>>\n}\n\n/**\n * @beta\n *\n * @example\n *\n * ```tsx\n * const noLowerCaseA = defineBehavior({\n *   on: 'insert.text',\n *   guard: ({event, snapshot}) => event.text === 'a',\n *   actions: [({event, snapshot}) => [{type: 'insert.text', text: 'A'}]],\n * })\n * ```\n *\n */\nexport function defineBehavior<\n  TPayload extends Record<string, unknown>,\n  TBehaviorEventType extends\n    | '*'\n    | `${BehaviorEventTypeNamespace}.*`\n    | BehaviorEvent['type'] = CustomBehaviorEvent['type'],\n  TGuardResponse = true,\n>(\n  behavior: Behavior<\n    TBehaviorEventType,\n    TGuardResponse,\n    ResolveBehaviorEvent<TBehaviorEventType, TPayload>\n  >,\n): Behavior\nexport function defineBehavior<\n  TPayload extends never = never,\n  TBehaviorEventType extends\n    | '*'\n    | `${BehaviorEventTypeNamespace}.*`\n    | BehaviorEvent['type'] = BehaviorEvent['type'],\n  TGuardResponse = true,\n  TBehaviorEvent extends ResolveBehaviorEvent<TBehaviorEventType, TPayload> =\n    ResolveBehaviorEvent<TBehaviorEventType, TPayload>,\n>(\n  behavior: Behavior<TBehaviorEventType, TGuardResponse, TBehaviorEvent>,\n): Behavior {\n  return behavior as unknown as Behavior\n}\n"],"names":["execute","event","type","forward","raise","effect","defineBehavior","behavior"],"mappings":";;;;;;;;;;;;AA0DO,SAASA,QACdC,KAAAA,EACkD;IAClD,OAAO;QAACC,MAAM;QAAWD;IAAAA;AAC3B;AAKO,SAASE,QACdF,KAAAA,EACkD;IAClD,OAAO;QAACC,MAAM;QAAWD;IAAAA;AAC3B;AAKO,SAASG,MACdH,KAAAA,EACgD;IAChD,OAAO;QAACC,MAAM;QAASD;IAAAA;AACzB;AAKO,SAASI,OACdA,OAAAA,EACiD;IACjD,OAAO;QAACH,MAAM;QAAUG,QAAAA;IAAAA;AAC1B;ACpBO,SAASC,eAUdC,QAAAA,EACU;IACV,OAAOA;AACT","debugId":null}},
    {"offset": {"line": 49, "column": 0}, "map": {"version":3,"file":"turbopack:///[project]/code/cedesigns/theresa_kennish/node_modules/.pnpm/@portabletext+editor@4.2.2_@portabletext+sanity-bridge@2.0.0_@types+react@19.2.2__@type_9e5c4a470ba434d0a1e40b5f8b2f25a3/node_modules/@portabletext/editor/lib/plugins/index.js","sources":["file:///Users/benjamincorbett/code/cedesigns/theresa_kennish/node_modules/.pnpm/%40portabletext%2Beditor%404.2.2_%40portabletext%2Bsanity-bridge%402.0.0_%40types%2Breact%4019.2.2__%40type_9e5c4a470ba434d0a1e40b5f8b2f25a3/node_modules/%40portabletext/editor/src/plugins/plugin.behavior.tsx","file:///Users/benjamincorbett/code/cedesigns/theresa_kennish/node_modules/.pnpm/%40portabletext%2Beditor%404.2.2_%40portabletext%2Bsanity-bridge%402.0.0_%40types%2Breact%4019.2.2__%40type_9e5c4a470ba434d0a1e40b5f8b2f25a3/node_modules/%40portabletext/editor/src/plugins/plugin.editor-ref.tsx","file:///Users/benjamincorbett/code/cedesigns/theresa_kennish/node_modules/.pnpm/%40portabletext%2Beditor%404.2.2_%40portabletext%2Bsanity-bridge%402.0.0_%40types%2Breact%4019.2.2__%40type_9e5c4a470ba434d0a1e40b5f8b2f25a3/node_modules/%40portabletext/editor/src/plugins/plugin.event-listener.tsx"],"sourcesContent":["import {useEffect} from 'react'\nimport type {Behavior} from '../behaviors/behavior.types.behavior'\nimport {useEditor} from '../editor/use-editor'\n\n/**\n * @beta\n */\nexport function BehaviorPlugin(props: {behaviors: Array<Behavior>}) {\n  const editor = useEditor()\n\n  useEffect(() => {\n    const unregisterBehaviors = props.behaviors.map((behavior) =>\n      editor.registerBehavior({behavior}),\n    )\n\n    return () => {\n      unregisterBehaviors.forEach((unregister) => {\n        unregister()\n      })\n    }\n  }, [editor, props.behaviors])\n\n  return null\n}\n","import React from 'react'\nimport type {Editor} from '../editor'\nimport {useEditor} from '../editor/use-editor'\n\n/**\n * @beta\n */\nexport const EditorRefPlugin = React.forwardRef<Editor | null>((_, ref) => {\n  const editor = useEditor()\n\n  const portableTextEditorRef = React.useRef(editor)\n\n  React.useImperativeHandle(ref, () => portableTextEditorRef.current, [])\n\n  return null\n})\nEditorRefPlugin.displayName = 'EditorRefPlugin'\n","import {useEffect} from 'react'\nimport type {EditorEmittedEvent} from '../editor/relay-machine'\nimport {useEditor} from '../editor/use-editor'\n\n/**\n * @public\n * Listen for events emitted by the editor. Must be used inside `EditorProvider`. Events available include:\n *  - 'blurred'\n *  - 'done loading'\n *  - 'editable'\n *  - 'error'\n *  - 'focused'\n *  - 'invalid value'\n *  - 'loading'\n *  - 'mutation'\n *  - 'patch'\n *  - 'read only'\n *  - 'ready'\n *  - 'selection'\n *  - 'value changed'\n *\n * @example\n * Listen and log events.\n * ```tsx\n * import {EditorProvider} from '@portabletext/editor'\n * import {EventListenerPlugin} from '@portabletext/editor/plugins'\n *\n * function MyComponent() {\n *  return (\n *  <EditorProvider>\n *   <EventListenerPlugin\n *    on={(event) => {\n *     console.log(event)\n *    }\n *   } />\n *   { ... }\n * </EditorProvider>\n *  )\n * }\n * ```\n * @example\n * Handle events when there is a mutation.\n * ```tsx\n * <EventListenerPlugin\n *  on={(event) => {\n *    if (event.type === 'mutation') {\n *      console.log('Value changed:', event.snapshot)\n *    }\n *  }}\n * />\n * ```\n * @group Components\n */\nexport function EventListenerPlugin(props: {\n  on: (event: EditorEmittedEvent) => void\n}) {\n  const editor = useEditor()\n\n  useEffect(() => {\n    const subscription = editor.on('*', props.on)\n\n    return () => {\n      subscription.unsubscribe()\n    }\n  }, [editor, props.on])\n\n  return null\n}\n"],"names":["BehaviorPlugin","props","$","_c","editor","useEditor","t0","t1","behaviors","unregisterBehaviors","map","behavior","registerBehavior","forEach","_temp","useEffect","unregister","EditorRefPlugin","React","forwardRef","_","ref","portableTextEditorRef","useRef","Symbol","for","current","useImperativeHandle","displayName","EventListenerPlugin","on","subscription","unsubscribe"],"mappings":";;;;;;;;;;;;;;AAOO,SAAAA,eAAAC,KAAAA,EAAA;IAAA,MAAAC,QAAAC,8dAAAA,EAAA,CAAA,GACLC,aAAeC,8aAAAA,CAAAA;IAAW,IAAAC,IAAAC;IAAA,OAAAL,CAAAA,CAAAA,EAAAA,KAAAE,UAAAF,CAAAA,CAAA,CAAA,CAAA,KAAAD,MAAAO,SAAAA,GAAAA,CAEhBF,KAAAA,MAAA;QACR,MAAAG,sBAA4BR,MAAKO,SAAAA,CAAUE,GAAAA,CAAKC,CAAAA,WAC9CP,OAAMQ,gBAAAA,CAAkB;gBAAAD;YAAAA,CAAU,CACpC;QAAC,OAEM,MAAA;YACLF,oBAAmBI,OAAAA,CAASC,KAE3B;QAAC;IACH,GACAP,KAAAA;QAACH;QAAQH,MAAKO,SAAU;KAAA,EAACN,CAAAA,CAAAA,EAAAA,GAAAE,QAAAF,CAAAA,CAAA,CAAA,CAAA,GAAAD,MAAAO,SAAAA,EAAAN,CAAAA,CAAAA,EAAAA,GAAAI,IAAAJ,CAAAA,CAAAA,EAAAA,GAAAK,EAAAA,IAAAA,CAAAD,KAAAJ,CAAAA,CAAA,CAAA,CAAA,EAAAK,KAAAL,CAAAA,CAAA,CAAA,CAAA,OAV5Ba,+cAAAA,EAAUT,IAUPC,EAAyB,GAErB;AAAI;AAfN,SAAAO,MAAAE,UAAAA,EAAA;IAUCA,WAAAA;AAAY;ACVb,MAAMC,kBAAkBC,6cAAAA,CAAMC,UAAAA,CAA0B,CAAAC,GAAAC,QAAA;IAAA,MAAAnB,QAAAC,8dAAAA,EAAA,CAAA,GAC7DC,aAAeC,8aAAAA,KAEfiB,wBAA8BJ,6cAAAA,CAAKK,MAAAA,CAAQnB,MAAM;IAAC,IAAAE,IAAAC;IAAA,OAAAL,CAAAA,CAAA,CAAA,CAAA,KAAAsB,aAAAA,GAAAA,OAAAC,GAAAA,CAAA,2BAAA,IAAA,CAEnBnB,KAAAA,IAAMgB,sBAAqBI,OAAAA,EAAUnB,KAAA,CAAA,CAAA,EAAEL,CAAAA,CAAAA,EAAAA,GAAAI,IAAAJ,CAAAA,CAAAA,EAAAA,GAAAK,EAAAA,IAAAA,CAAAD,KAAAJ,CAAAA,CAAA,CAAA,CAAA,EAAAK,KAAAL,CAAAA,CAAA,CAAA,CAAA,GAAtEgB,6cAAAA,CAAKS,mBAAAA,CAAqBN,KAAKf,IAAqCC,EAAE,GAE/D;AAAI,CACZ;AACDU,gBAAgBW,WAAAA,GAAc;ACqCvB,SAAAC,oBAAA5B,KAAAA,EAAA;IAAA,MAAAC,QAAAC,8dAAAA,EAAA,CAAA,GAGLC,aAAeC,8aAAAA,CAAAA;IAAW,IAAAC,IAAAC;IAAA,OAAAL,CAAAA,CAAAA,EAAAA,KAAAE,UAAAF,CAAAA,CAAA,CAAA,CAAA,KAAAD,MAAA6B,EAAAA,GAAAA,CAEhBxB,KAAAA,MAAA;QACR,MAAAyB,eAAqB3B,OAAM0B,EAAAA,CAAI,KAAK7B,MAAK6B,EAAG;QAAC,OAEtC,MAAA;YACLC,aAAYC,WAAAA,CAAAA;QAAc;IAC3B,GACAzB,KAAAA;QAACH;QAAQH,MAAK6B,EAAG;KAAA,EAAC5B,CAAAA,CAAAA,EAAAA,GAAAE,QAAAF,CAAAA,CAAA,CAAA,CAAA,GAAAD,MAAA6B,EAAAA,EAAA5B,CAAAA,CAAAA,EAAAA,GAAAI,IAAAJ,CAAAA,CAAAA,EAAAA,GAAAK,EAAAA,IAAAA,CAAAD,KAAAJ,CAAAA,CAAA,CAAA,CAAA,EAAAK,KAAAL,CAAAA,CAAA,CAAA,CAAA,OANrBa,+cAAAA,EAAUT,IAMPC,EAAkB,GAEd;AAAI","debugId":null}},
    {"offset": {"line": 106, "column": 0}, "map": {"version":3,"file":"turbopack:///[project]/code/cedesigns/theresa_kennish/node_modules/.pnpm/@portabletext+editor@4.2.2_@portabletext+sanity-bridge@2.0.0_@types+react@19.2.2__@type_9e5c4a470ba434d0a1e40b5f8b2f25a3/node_modules/@portabletext/editor/lib/utils/index.js","sources":["file:///Users/benjamincorbett/code/cedesigns/theresa_kennish/node_modules/.pnpm/%40portabletext%2Beditor%404.2.2_%40portabletext%2Bsanity-bridge%402.0.0_%40types%2Breact%4019.2.2__%40type_9e5c4a470ba434d0a1e40b5f8b2f25a3/node_modules/%40portabletext/editor/src/utils/util.block-offset-to-block-selection-point.ts","file:///Users/benjamincorbett/code/cedesigns/theresa_kennish/node_modules/.pnpm/%40portabletext%2Beditor%404.2.2_%40portabletext%2Bsanity-bridge%402.0.0_%40types%2Breact%4019.2.2__%40type_9e5c4a470ba434d0a1e40b5f8b2f25a3/node_modules/%40portabletext/editor/src/utils/util.block-offset-to-selection-point.ts","file:///Users/benjamincorbett/code/cedesigns/theresa_kennish/node_modules/.pnpm/%40portabletext%2Beditor%404.2.2_%40portabletext%2Bsanity-bridge%402.0.0_%40types%2Breact%4019.2.2__%40type_9e5c4a470ba434d0a1e40b5f8b2f25a3/node_modules/%40portabletext/editor/src/utils/util.block-offsets-to-selection.ts","file:///Users/benjamincorbett/code/cedesigns/theresa_kennish/node_modules/.pnpm/%40portabletext%2Beditor%404.2.2_%40portabletext%2Bsanity-bridge%402.0.0_%40types%2Breact%4019.2.2__%40type_9e5c4a470ba434d0a1e40b5f8b2f25a3/node_modules/%40portabletext/editor/src/utils/util.child-selection-point-to-block-offset.ts","file:///Users/benjamincorbett/code/cedesigns/theresa_kennish/node_modules/.pnpm/%40portabletext%2Beditor%404.2.2_%40portabletext%2Bsanity-bridge%402.0.0_%40types%2Breact%4019.2.2__%40type_9e5c4a470ba434d0a1e40b5f8b2f25a3/node_modules/%40portabletext/editor/src/utils/util.is-equal-selections.ts","file:///Users/benjamincorbett/code/cedesigns/theresa_kennish/node_modules/.pnpm/%40portabletext%2Beditor%404.2.2_%40portabletext%2Bsanity-bridge%402.0.0_%40types%2Breact%4019.2.2__%40type_9e5c4a470ba434d0a1e40b5f8b2f25a3/node_modules/%40portabletext/editor/src/utils/util.merge-text-blocks.ts","file:///Users/benjamincorbett/code/cedesigns/theresa_kennish/node_modules/.pnpm/%40portabletext%2Beditor%404.2.2_%40portabletext%2Bsanity-bridge%402.0.0_%40types%2Breact%4019.2.2__%40type_9e5c4a470ba434d0a1e40b5f8b2f25a3/node_modules/%40portabletext/editor/src/utils/util.reverse-selection.ts","file:///Users/benjamincorbett/code/cedesigns/theresa_kennish/node_modules/.pnpm/%40portabletext%2Beditor%404.2.2_%40portabletext%2Bsanity-bridge%402.0.0_%40types%2Breact%4019.2.2__%40type_9e5c4a470ba434d0a1e40b5f8b2f25a3/node_modules/%40portabletext/editor/src/utils/util.selection-point-to-block-offset.ts","file:///Users/benjamincorbett/code/cedesigns/theresa_kennish/node_modules/.pnpm/%40portabletext%2Beditor%404.2.2_%40portabletext%2Bsanity-bridge%402.0.0_%40types%2Breact%4019.2.2__%40type_9e5c4a470ba434d0a1e40b5f8b2f25a3/node_modules/%40portabletext/editor/src/utils/util.split-text-block.ts"],"sourcesContent":["import type {EditorContext} from '../editor/editor-snapshot'\nimport type {BlockOffset} from '../types/block-offset'\nimport type {EditorSelectionPoint} from '../types/editor'\n\n/**\n * @public\n */\nexport function blockOffsetToBlockSelectionPoint({\n  context,\n  blockOffset,\n}: {\n  context: Pick<EditorContext, 'value'>\n  blockOffset: BlockOffset\n}): EditorSelectionPoint | undefined {\n  let selectionPoint: EditorSelectionPoint | undefined\n\n  for (const block of context.value) {\n    if (block._key === blockOffset.path[0]._key) {\n      selectionPoint = {\n        path: [{_key: block._key}],\n        offset: blockOffset.offset,\n      }\n      break\n    }\n  }\n\n  return selectionPoint\n}\n","import type {EditorContext} from '../editor/editor-snapshot'\nimport type {BlockOffset} from '../types/block-offset'\nimport type {EditorSelectionPoint} from '../types/editor'\nimport {blockOffsetToSpanSelectionPoint} from './util.block-offset'\nimport {blockOffsetToBlockSelectionPoint} from './util.block-offset-to-block-selection-point'\n\n/**\n * @public\n */\nexport function blockOffsetToSelectionPoint({\n  context,\n  blockOffset,\n  direction,\n}: {\n  context: Pick<EditorContext, 'schema' | 'value'>\n  blockOffset: BlockOffset\n  direction: 'forward' | 'backward'\n}): EditorSelectionPoint | undefined {\n  const spanSelectionPoint = blockOffsetToSpanSelectionPoint({\n    context,\n    blockOffset,\n    direction,\n  })\n\n  if (!spanSelectionPoint) {\n    return blockOffsetToBlockSelectionPoint({\n      context,\n      blockOffset,\n    })\n  }\n\n  return spanSelectionPoint\n}\n","import type {EditorContext} from '../editor/editor-snapshot'\nimport type {BlockOffset} from '../types/block-offset'\nimport type {EditorSelection} from '../types/editor'\nimport {blockOffsetToSelectionPoint} from './util.block-offset-to-selection-point'\n\n/**\n * @public\n */\nexport function blockOffsetsToSelection({\n  context,\n  offsets,\n  backward,\n}: {\n  context: Pick<EditorContext, 'schema' | 'value'>\n  offsets: {anchor: BlockOffset; focus: BlockOffset}\n  backward?: boolean\n}): EditorSelection {\n  const anchor = blockOffsetToSelectionPoint({\n    context,\n    blockOffset: offsets.anchor,\n    direction: backward ? 'backward' : 'forward',\n  })\n  const focus = blockOffsetToSelectionPoint({\n    context,\n    blockOffset: offsets.focus,\n    direction: backward ? 'forward' : 'backward',\n  })\n\n  if (!anchor || !focus) {\n    return null\n  }\n\n  return {\n    anchor,\n    focus,\n    backward,\n  }\n}\n","import {isSpan, isTextBlock} from '@portabletext/schema'\nimport type {EditorContext} from '../editor/editor-snapshot'\nimport type {BlockOffset} from '../types/block-offset'\nimport type {EditorSelectionPoint} from '../types/editor'\nimport {\n  getBlockKeyFromSelectionPoint,\n  getChildKeyFromSelectionPoint,\n} from './util.selection-point'\n\n/**\n * @public\n */\nexport function childSelectionPointToBlockOffset({\n  context,\n  selectionPoint,\n}: {\n  context: Pick<EditorContext, 'schema' | 'value'>\n  selectionPoint: EditorSelectionPoint\n}): BlockOffset | undefined {\n  let offset = 0\n\n  const blockKey = getBlockKeyFromSelectionPoint(selectionPoint)\n  const childKey = getChildKeyFromSelectionPoint(selectionPoint)\n\n  if (!blockKey || !childKey) {\n    return undefined\n  }\n\n  for (const block of context.value) {\n    if (block._key !== blockKey) {\n      continue\n    }\n\n    if (!isTextBlock(context, block)) {\n      continue\n    }\n\n    for (const child of block.children) {\n      if (child._key === childKey) {\n        return {\n          path: [{_key: block._key}],\n          offset: offset + selectionPoint.offset,\n        }\n      }\n\n      if (isSpan(context, child)) {\n        offset += child.text.length\n      }\n    }\n  }\n}\n","import type {EditorSelection} from '../types/editor'\nimport {isEqualSelectionPoints} from './util.is-equal-selection-points'\n\n/**\n * @public\n */\nexport function isEqualSelections(a: EditorSelection, b: EditorSelection) {\n  if (!a && !b) {\n    return true\n  }\n\n  if (!a || !b) {\n    return false\n  }\n\n  return (\n    isEqualSelectionPoints(a.anchor, b.anchor) &&\n    isEqualSelectionPoints(a.focus, b.focus)\n  )\n}\n","import {isTextBlock, type PortableTextTextBlock} from '@portabletext/schema'\nimport type {EditorContext} from '../editor/editor-snapshot'\nimport {parseBlock} from './parse-blocks'\n\n/**\n * @beta\n */\nexport function mergeTextBlocks({\n  context,\n  targetBlock,\n  incomingBlock,\n}: {\n  context: Pick<EditorContext, 'keyGenerator' | 'schema'>\n  targetBlock: PortableTextTextBlock\n  incomingBlock: PortableTextTextBlock\n}) {\n  const parsedIncomingBlock = parseBlock({\n    context,\n    block: incomingBlock,\n    options: {\n      normalize: false,\n      removeUnusedMarkDefs: true,\n      validateFields: false,\n    },\n  })\n\n  if (!parsedIncomingBlock || !isTextBlock(context, parsedIncomingBlock)) {\n    return targetBlock\n  }\n\n  return {\n    ...targetBlock,\n    children: [...targetBlock.children, ...parsedIncomingBlock.children],\n    markDefs: [\n      ...(targetBlock.markDefs ?? []),\n      ...(parsedIncomingBlock.markDefs ?? []),\n    ],\n  }\n}\n","import type {EditorSelection} from '../types/editor'\n\n/**\n * @public\n */\nexport function reverseSelection<\n  TEditorSelection extends NonNullable<EditorSelection> | null,\n>(selection: TEditorSelection): TEditorSelection {\n  if (!selection) {\n    return selection\n  }\n\n  if (selection.backward) {\n    return {\n      anchor: selection.focus,\n      focus: selection.anchor,\n      backward: false,\n    } as TEditorSelection\n  }\n\n  return {\n    anchor: selection.focus,\n    focus: selection.anchor,\n    backward: true,\n  } as TEditorSelection\n}\n","import type {EditorContext} from '../editor/editor-snapshot'\nimport type {BlockOffset} from '../types/block-offset'\nimport type {EditorSelectionPoint} from '../types/editor'\nimport {childSelectionPointToBlockOffset} from './util.child-selection-point-to-block-offset'\nimport {getBlockKeyFromSelectionPoint} from './util.selection-point'\n\n/**\n * @public\n */\nexport function selectionPointToBlockOffset({\n  context,\n  selectionPoint,\n}: {\n  context: Pick<EditorContext, 'schema' | 'value'>\n  selectionPoint: EditorSelectionPoint\n}): BlockOffset | undefined {\n  const blockKey = getBlockKeyFromSelectionPoint(selectionPoint)\n\n  if (selectionPoint.path.length === 1 && blockKey !== undefined) {\n    return {\n      path: [{_key: blockKey}],\n      offset: selectionPoint.offset,\n    }\n  }\n\n  return childSelectionPointToBlockOffset({\n    context,\n    selectionPoint,\n  })\n}\n","import {isSpan, type PortableTextTextBlock} from '@portabletext/schema'\nimport type {EditorContext} from '../editor/editor-snapshot'\nimport type {EditorSelectionPoint} from '../types/editor'\nimport {sliceTextBlock} from './util.slice-text-block'\n\n/**\n * @beta\n */\nexport function splitTextBlock({\n  context,\n  block,\n  point,\n}: {\n  context: Pick<EditorContext, 'schema'>\n  block: PortableTextTextBlock\n  point: EditorSelectionPoint\n}): {before: PortableTextTextBlock; after: PortableTextTextBlock} | undefined {\n  const firstChild = block.children.at(0)\n  const lastChild = block.children.at(block.children.length - 1)\n\n  if (!firstChild || !lastChild) {\n    return undefined\n  }\n\n  const before = sliceTextBlock({\n    context: {\n      schema: context.schema,\n      selection: {\n        anchor: {\n          path: [{_key: block._key}, 'children', {_key: firstChild._key}],\n          offset: 0,\n        },\n        focus: point,\n      },\n    },\n    block,\n  })\n  const after = sliceTextBlock({\n    context: {\n      schema: context.schema,\n      selection: {\n        anchor: point,\n        focus: {\n          path: [{_key: block._key}, 'children', {_key: lastChild._key}],\n          offset: isSpan(context, lastChild) ? lastChild.text.length : 0,\n        },\n      },\n    },\n    block,\n  })\n\n  return {before, after}\n}\n"],"names":["blockOffsetToBlockSelectionPoint","context","blockOffset","selectionPoint","block","value","_key","path","offset","blockOffsetToSelectionPoint","direction","blockOffsetToSpanSelectionPoint","blockOffsetsToSelection","offsets","backward","anchor","focus","childSelectionPointToBlockOffset","blockKey","getBlockKeyFromSelectionPoint","childKey","getChildKeyFromSelectionPoint","isTextBlock","child","children","isSpan","text","length","isEqualSelections","a","b","isEqualSelectionPoints","mergeTextBlocks","targetBlock","incomingBlock","parsedIncomingBlock","parseBlock","options","normalize","removeUnusedMarkDefs","validateFields","markDefs","reverseSelection","selection","selectionPointToBlockOffset","undefined","splitTextBlock","point","firstChild","at","lastChild","before","sliceTextBlock","schema","after"],"mappings":"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","debugId":null}},
    {"offset": {"line": 298, "column": 0}, "map": {"version":3,"file":"turbopack:///[project]/code/cedesigns/theresa_kennish/node_modules/.pnpm/@portabletext+editor@4.2.2_@portabletext+sanity-bridge@2.0.0_@types+react@19.2.2__@type_9e5c4a470ba434d0a1e40b5f8b2f25a3/node_modules/@portabletext/editor/lib/selectors/index.js","sources":["file:///Users/benjamincorbett/code/cedesigns/theresa_kennish/node_modules/.pnpm/%40portabletext%2Beditor%404.2.2_%40portabletext%2Bsanity-bridge%402.0.0_%40types%2Breact%4019.2.2__%40type_9e5c4a470ba434d0a1e40b5f8b2f25a3/node_modules/%40portabletext/editor/src/selectors/selector.get-anchor-block.ts","file:///Users/benjamincorbett/code/cedesigns/theresa_kennish/node_modules/.pnpm/%40portabletext%2Beditor%404.2.2_%40portabletext%2Bsanity-bridge%402.0.0_%40types%2Breact%4019.2.2__%40type_9e5c4a470ba434d0a1e40b5f8b2f25a3/node_modules/%40portabletext/editor/src/selectors/selector.get-anchor-text-block.ts","file:///Users/benjamincorbett/code/cedesigns/theresa_kennish/node_modules/.pnpm/%40portabletext%2Beditor%404.2.2_%40portabletext%2Bsanity-bridge%402.0.0_%40types%2Breact%4019.2.2__%40type_9e5c4a470ba434d0a1e40b5f8b2f25a3/node_modules/%40portabletext/editor/src/selectors/selector.get-anchor-child.ts","file:///Users/benjamincorbett/code/cedesigns/theresa_kennish/node_modules/.pnpm/%40portabletext%2Beditor%404.2.2_%40portabletext%2Bsanity-bridge%402.0.0_%40types%2Breact%4019.2.2__%40type_9e5c4a470ba434d0a1e40b5f8b2f25a3/node_modules/%40portabletext/editor/src/selectors/selector.get-anchor-span.ts","file:///Users/benjamincorbett/code/cedesigns/theresa_kennish/node_modules/.pnpm/%40portabletext%2Beditor%404.2.2_%40portabletext%2Bsanity-bridge%402.0.0_%40types%2Breact%4019.2.2__%40type_9e5c4a470ba434d0a1e40b5f8b2f25a3/node_modules/%40portabletext/editor/src/selectors/selector.get-block-offsets.ts","file:///Users/benjamincorbett/code/cedesigns/theresa_kennish/node_modules/.pnpm/%40portabletext%2Beditor%404.2.2_%40portabletext%2Bsanity-bridge%402.0.0_%40types%2Breact%4019.2.2__%40type_9e5c4a470ba434d0a1e40b5f8b2f25a3/node_modules/%40portabletext/editor/src/selectors/selector.get-first-block.ts","file:///Users/benjamincorbett/code/cedesigns/theresa_kennish/node_modules/.pnpm/%40portabletext%2Beditor%404.2.2_%40portabletext%2Bsanity-bridge%402.0.0_%40types%2Breact%4019.2.2__%40type_9e5c4a470ba434d0a1e40b5f8b2f25a3/node_modules/%40portabletext/editor/src/selectors/selector.get-next-inline-objects.ts","file:///Users/benjamincorbett/code/cedesigns/theresa_kennish/node_modules/.pnpm/%40portabletext%2Beditor%404.2.2_%40portabletext%2Bsanity-bridge%402.0.0_%40types%2Breact%4019.2.2__%40type_9e5c4a470ba434d0a1e40b5f8b2f25a3/node_modules/%40portabletext/editor/src/selectors/selector.get-previous-inline-objects.ts","file:///Users/benjamincorbett/code/cedesigns/theresa_kennish/node_modules/.pnpm/%40portabletext%2Beditor%404.2.2_%40portabletext%2Bsanity-bridge%402.0.0_%40types%2Breact%4019.2.2__%40type_9e5c4a470ba434d0a1e40b5f8b2f25a3/node_modules/%40portabletext/editor/src/selectors/selector.get-selection.ts","file:///Users/benjamincorbett/code/cedesigns/theresa_kennish/node_modules/.pnpm/%40portabletext%2Beditor%404.2.2_%40portabletext%2Bsanity-bridge%402.0.0_%40types%2Breact%4019.2.2__%40type_9e5c4a470ba434d0a1e40b5f8b2f25a3/node_modules/%40portabletext/editor/src/selectors/selector.get-text-after.ts","file:///Users/benjamincorbett/code/cedesigns/theresa_kennish/node_modules/.pnpm/%40portabletext%2Beditor%404.2.2_%40portabletext%2Bsanity-bridge%402.0.0_%40types%2Breact%4019.2.2__%40type_9e5c4a470ba434d0a1e40b5f8b2f25a3/node_modules/%40portabletext/editor/src/selectors/selector.get-text-before.ts","file:///Users/benjamincorbett/code/cedesigns/theresa_kennish/node_modules/.pnpm/%40portabletext%2Beditor%404.2.2_%40portabletext%2Bsanity-bridge%402.0.0_%40types%2Breact%4019.2.2__%40type_9e5c4a470ba434d0a1e40b5f8b2f25a3/node_modules/%40portabletext/editor/src/selectors/selector.get-value.ts","file:///Users/benjamincorbett/code/cedesigns/theresa_kennish/node_modules/.pnpm/%40portabletext%2Beditor%404.2.2_%40portabletext%2Bsanity-bridge%402.0.0_%40types%2Breact%4019.2.2__%40type_9e5c4a470ba434d0a1e40b5f8b2f25a3/node_modules/%40portabletext/editor/src/selectors/selector.is-point-after-selection.ts","file:///Users/benjamincorbett/code/cedesigns/theresa_kennish/node_modules/.pnpm/%40portabletext%2Beditor%404.2.2_%40portabletext%2Bsanity-bridge%402.0.0_%40types%2Breact%4019.2.2__%40type_9e5c4a470ba434d0a1e40b5f8b2f25a3/node_modules/%40portabletext/editor/src/selectors/selector.is-point-before-selection.ts"],"sourcesContent":["import type {PortableTextBlock} from '@portabletext/schema'\nimport type {EditorSelector} from '../editor/editor-selector'\nimport type {BlockPath} from '../types/paths'\nimport {getBlockKeyFromSelectionPoint} from '../utils/util.selection-point'\n\n/**\n * @public\n */\nexport const getAnchorBlock: EditorSelector<\n  {node: PortableTextBlock; path: BlockPath} | undefined\n> = (snapshot) => {\n  if (!snapshot.context.selection) {\n    return undefined\n  }\n\n  const key = getBlockKeyFromSelectionPoint(snapshot.context.selection.anchor)\n  const index = key ? snapshot.blockIndexMap.get(key) : undefined\n  const node =\n    index !== undefined ? snapshot.context.value.at(index) : undefined\n\n  return node && key ? {node, path: [{_key: key}]} : undefined\n}\n","import {isTextBlock, type PortableTextTextBlock} from '@portabletext/schema'\nimport type {EditorSelector} from '../editor/editor-selector'\nimport type {BlockPath} from '../types/paths'\nimport {getAnchorBlock} from './selector.get-anchor-block'\n\n/**\n * @public\n */\nexport const getAnchorTextBlock: EditorSelector<\n  {node: PortableTextTextBlock; path: BlockPath} | undefined\n> = (snapshot) => {\n  const anchorBlock = getAnchorBlock(snapshot)\n\n  return anchorBlock && isTextBlock(snapshot.context, anchorBlock.node)\n    ? {node: anchorBlock.node, path: anchorBlock.path}\n    : undefined\n}\n","import type {PortableTextObject, PortableTextSpan} from '@portabletext/schema'\nimport type {EditorSelector} from '../editor/editor-selector'\nimport type {ChildPath} from '../types/paths'\nimport {getChildKeyFromSelectionPoint} from '../utils/util.selection-point'\nimport {getAnchorTextBlock} from './selector.get-anchor-text-block'\n\n/**\n * @public\n */\nexport const getAnchorChild: EditorSelector<\n  | {\n      node: PortableTextObject | PortableTextSpan\n      path: ChildPath\n    }\n  | undefined\n> = (snapshot) => {\n  if (!snapshot.context.selection) {\n    return undefined\n  }\n\n  const anchorBlock = getAnchorTextBlock(snapshot)\n\n  if (!anchorBlock) {\n    return undefined\n  }\n\n  const key = getChildKeyFromSelectionPoint(snapshot.context.selection.anchor)\n\n  const node = key\n    ? anchorBlock.node.children.find((span) => span._key === key)\n    : undefined\n\n  return node && key\n    ? {node, path: [...anchorBlock.path, 'children', {_key: key}]}\n    : undefined\n}\n","import {isSpan, type PortableTextSpan} from '@portabletext/schema'\nimport type {EditorSelector} from '../editor/editor-selector'\nimport type {ChildPath} from '../types/paths'\nimport {getAnchorChild} from './selector.get-anchor-child'\n\n/**\n * @public\n */\nexport const getAnchorSpan: EditorSelector<\n  {node: PortableTextSpan; path: ChildPath} | undefined\n> = (snapshot) => {\n  const anchorChild = getAnchorChild(snapshot)\n\n  return anchorChild && isSpan(snapshot.context, anchorChild.node)\n    ? {node: anchorChild.node, path: anchorChild.path}\n    : undefined\n}\n","import type {EditorSelector} from '../editor/editor-selector'\nimport type {BlockOffset} from '../types/block-offset'\nimport {spanSelectionPointToBlockOffset} from '../utils/util.block-offset'\nimport {getSelectionEndPoint} from './selector.get-selection-end-point'\nimport {getSelectionStartPoint} from './selector.get-selection-start-point'\n\n/**\n * @public\n */\nexport const getBlockOffsets: EditorSelector<\n  {start: BlockOffset; end: BlockOffset} | undefined\n> = (snapshot) => {\n  if (!snapshot.context.selection) {\n    return undefined\n  }\n\n  const selectionStartPoint = getSelectionStartPoint(snapshot)\n  const selectionEndPoint = getSelectionEndPoint(snapshot)\n\n  if (!selectionStartPoint || !selectionEndPoint) {\n    return undefined\n  }\n\n  const start = spanSelectionPointToBlockOffset({\n    context: snapshot.context,\n    selectionPoint: selectionStartPoint,\n  })\n  const end = spanSelectionPointToBlockOffset({\n    context: snapshot.context,\n    selectionPoint: selectionEndPoint,\n  })\n\n  return start && end ? {start, end} : undefined\n}\n","import type {PortableTextBlock} from '@portabletext/schema'\nimport type {EditorSelector} from '../editor/editor-selector'\nimport type {BlockPath} from '../types/paths'\n\n/**\n * @public\n */\nexport const getFirstBlock: EditorSelector<\n  {node: PortableTextBlock; path: BlockPath} | undefined\n> = (snapshot) => {\n  const node = snapshot.context.value[0]\n\n  return node ? {node, path: [{_key: node._key}]} : undefined\n}\n","import {isSpan, type PortableTextObject} from '@portabletext/schema'\nimport type {EditorSelector} from '../editor/editor-selector'\nimport type {ChildPath} from '../types/paths'\nimport {isKeyedSegment} from '../utils/util.is-keyed-segment'\nimport {getFocusTextBlock} from './selector.get-focus-text-block'\nimport {getSelectionEndPoint} from './selector.get-selection-end-point'\n\n/**\n * @public\n */\nexport const getNextInlineObjects: EditorSelector<\n  Array<{\n    node: PortableTextObject\n    path: ChildPath\n  }>\n> = (snapshot) => {\n  const focusTextBlock = getFocusTextBlock(snapshot)\n  const selectionEndPoint = getSelectionEndPoint(snapshot)\n  const selectionEndPointChildKey =\n    selectionEndPoint && isKeyedSegment(selectionEndPoint.path[2])\n      ? selectionEndPoint.path[2]._key\n      : undefined\n\n  if (!focusTextBlock || !selectionEndPointChildKey) {\n    return []\n  }\n\n  let endPointChildFound = false\n  const inlineObjects: Array<{\n    node: PortableTextObject\n    path: ChildPath\n  }> = []\n\n  for (const child of focusTextBlock.node.children) {\n    if (child._key === selectionEndPointChildKey) {\n      endPointChildFound = true\n      continue\n    }\n\n    if (!isSpan(snapshot.context, child) && endPointChildFound) {\n      inlineObjects.push({\n        node: child,\n        path: [...focusTextBlock.path, 'children', {_key: child._key}],\n      })\n      break\n    }\n  }\n\n  return inlineObjects\n}\n","import {isSpan, type PortableTextObject} from '@portabletext/schema'\nimport type {EditorSelector} from '../editor/editor-selector'\nimport type {ChildPath} from '../types/paths'\nimport {isKeyedSegment} from '../utils/util.is-keyed-segment'\nimport {getFocusTextBlock} from './selector.get-focus-text-block'\nimport {getSelectionStartPoint} from './selector.get-selection-start-point'\n\n/**\n * @public\n */\nexport const getPreviousInlineObjects: EditorSelector<\n  Array<{\n    node: PortableTextObject\n    path: ChildPath\n  }>\n> = (snapshot) => {\n  const focusTextBlock = getFocusTextBlock(snapshot)\n  const selectionStartPoint = getSelectionStartPoint(snapshot)\n  const selectionStartPointChildKey =\n    selectionStartPoint && isKeyedSegment(selectionStartPoint.path[2])\n      ? selectionStartPoint.path[2]._key\n      : undefined\n\n  if (!focusTextBlock || !selectionStartPointChildKey) {\n    return []\n  }\n\n  const inlineObjects: Array<{\n    node: PortableTextObject\n    path: ChildPath\n  }> = []\n\n  for (const child of focusTextBlock.node.children) {\n    if (child._key === selectionStartPointChildKey) {\n      break\n    }\n\n    if (!isSpan(snapshot.context, child)) {\n      inlineObjects.push({\n        node: child,\n        path: [...focusTextBlock.path, 'children', {_key: child._key}],\n      })\n    }\n  }\n\n  return inlineObjects\n}\n","import type {EditorSelector} from '../editor/editor-selector'\nimport type {EditorSelection} from '../types/editor'\n\n/**\n * @public\n */\nexport const getSelection: EditorSelector<EditorSelection> = (snapshot) => {\n  return snapshot.context.selection\n}\n","import type {EditorSelector} from '../editor/editor-selector'\nimport {getBlockEndPoint} from '../utils/util.get-block-end-point'\nimport {getSelectionEndPoint} from '../utils/util.get-selection-end-point'\nimport {getFocusBlock} from './selector.get-focus-block'\nimport {getSelectionText} from './selector.get-selection-text'\n\n/**\n * @public\n */\nexport const getBlockTextAfter: EditorSelector<string> = (snapshot) => {\n  if (!snapshot.context.selection) {\n    return ''\n  }\n\n  const endPoint = getSelectionEndPoint(snapshot.context.selection)\n  const block = getFocusBlock({\n    ...snapshot,\n    context: {\n      ...snapshot.context,\n      selection: {\n        anchor: endPoint,\n        focus: endPoint,\n      },\n    },\n  })\n\n  if (!block) {\n    return ''\n  }\n\n  const endOfBlock = getBlockEndPoint({\n    context: snapshot.context,\n    block,\n  })\n\n  return getSelectionText({\n    ...snapshot,\n    context: {\n      ...snapshot.context,\n      selection: {\n        anchor: endPoint,\n        focus: endOfBlock,\n      },\n    },\n  })\n}\n","import type {EditorSelector} from '../editor/editor-selector'\nimport {getBlockStartPoint} from '../utils/util.get-block-start-point'\nimport {getSelectionStartPoint} from '../utils/util.get-selection-start-point'\nimport {getFocusBlock} from './selector.get-focus-block'\nimport {getSelectionText} from './selector.get-selection-text'\n\n/**\n * @public\n */\nexport const getBlockTextBefore: EditorSelector<string> = (snapshot) => {\n  if (!snapshot.context.selection) {\n    return ''\n  }\n\n  const startPoint = getSelectionStartPoint(snapshot.context.selection)\n  const block = getFocusBlock({\n    ...snapshot,\n    context: {\n      ...snapshot.context,\n      selection: {\n        anchor: startPoint,\n        focus: startPoint,\n      },\n    },\n  })\n\n  if (!block) {\n    return ''\n  }\n\n  const startOfBlock = getBlockStartPoint({\n    context: snapshot.context,\n    block,\n  })\n\n  return getSelectionText({\n    ...snapshot,\n    context: {\n      ...snapshot.context,\n      selection: {\n        anchor: startOfBlock,\n        focus: startPoint,\n      },\n    },\n  })\n}\n","import type {PortableTextBlock} from '@portabletext/schema'\nimport type {EditorSelector} from '../editor/editor-selector'\n\n/**\n * @public\n */\nexport const getValue: EditorSelector<Array<PortableTextBlock>> = (\n  snapshot,\n) => {\n  return snapshot.context.value\n}\n","import type {EditorSelector} from '../editor/editor-selector'\nimport type {EditorSelectionPoint} from '../types/editor'\nimport {comparePoints} from '../utils/util.compare-points'\nimport {getSelectionEndPoint} from '../utils/util.get-selection-end-point'\n\n/**\n * @public\n */\nexport function isPointAfterSelection(\n  point: EditorSelectionPoint,\n): EditorSelector<boolean> {\n  return (snapshot) => {\n    if (!snapshot.context.selection) {\n      return false\n    }\n\n    const endPoint = getSelectionEndPoint(snapshot.context.selection)\n\n    return comparePoints(snapshot, point, endPoint) === 1\n  }\n}\n","import type {EditorSelector} from '../editor/editor-selector'\nimport type {EditorSelectionPoint} from '../types/editor'\nimport {comparePoints} from '../utils/util.compare-points'\nimport {getSelectionStartPoint} from '../utils/util.get-selection-start-point'\n\n/**\n * @public\n */\nexport function isPointBeforeSelection(\n  point: EditorSelectionPoint,\n): EditorSelector<boolean> {\n  return (snapshot) => {\n    if (!snapshot.context.selection) {\n      return false\n    }\n\n    const startPoint = getSelectionStartPoint(snapshot.context.selection)\n\n    return comparePoints(snapshot, point, startPoint) === -1\n  }\n}\n"],"names":["getAnchorBlock","snapshot","context","selection","key","getBlockKeyFromSelectionPoint","anchor","index","blockIndexMap","get","undefined","node","value","at","path","_key","getAnchorTextBlock","anchorBlock","isTextBlock","getAnchorChild","getChildKeyFromSelectionPoint","children","find","span","getAnchorSpan","anchorChild","isSpan","getBlockOffsets","selectionStartPoint","getSelectionStartPoint","selectionEndPoint","getSelectionEndPoint","start","spanSelectionPointToBlockOffset","selectionPoint","end","getFirstBlock","getNextInlineObjects","focusTextBlock","getFocusTextBlock","selectionEndPointChildKey","isKeyedSegment","endPointChildFound","inlineObjects","child","push","getPreviousInlineObjects","selectionStartPointChildKey","getSelection","getBlockTextAfter","endPoint","block","getFocusBlock","focus","endOfBlock","getBlockEndPoint","getSelectionText","getBlockTextBefore","startPoint","startOfBlock","getBlockStartPoint","getValue","isPointAfterSelection","point","comparePoints","isPointBeforeSelection"],"mappings":"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","debugId":null}}]
}