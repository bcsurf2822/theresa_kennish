{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 52, "column": 0}, "map": {"version":3,"sources":["file:///Users/benjamincorbett/code/cedesigns/theresa_kennish/sanity/client.ts"],"sourcesContent":["import { createClient } from \"next-sanity\";\n\n// Read client (no token needed for public data)\nexport const client = createClient({\n  projectId: \"mcfd2t8i\",\n  dataset: \"production\",\n  apiVersion: \"2024-01-01\",\n  useCdn: false,\n});\n\n// Write client (requires API token with write permissions)\nexport const writeClient = createClient({\n  projectId: \"mcfd2t8i\",\n  dataset: \"production\",\n  apiVersion: \"2024-01-01\",\n  useCdn: false,\n  token: process.env.SANITY_API_TOKEN,\n});\n"],"names":[],"mappings":";;;;;;AAAA;;AAGO,MAAM,SAAS,IAAA,6TAAY,EAAC;IACjC,WAAW;IACX,SAAS;IACT,YAAY;IACZ,QAAQ;AACV;AAGO,MAAM,cAAc,IAAA,6TAAY,EAAC;IACtC,WAAW;IACX,SAAS;IACT,YAAY;IACZ,QAAQ;IACR,OAAO,QAAQ,GAAG,CAAC,gBAAgB;AACrC","debugId":null}},
    {"offset": {"line": 77, "column": 0}, "map": {"version":3,"sources":["file:///Users/benjamincorbett/code/cedesigns/theresa_kennish/app/api/series/route.ts"],"sourcesContent":["import { NextResponse } from \"next/server\";\nimport { client, writeClient } from \"@/sanity/client\";\n\nconst SERIES_QUERY = `*[_type == \"series\"] | order(order asc) {\n  _id,\n  title,\n  slug,\n  description,\n  \"coverImage\": coverImage.asset->url,\n  order\n}`;\n\nexport async function GET() {\n  try {\n    const series = await client.fetch(SERIES_QUERY);\n    return NextResponse.json(series);\n  } catch (error) {\n    console.error(\"[api/series-GET] Error fetching series:\", error);\n    return NextResponse.json(\n      { error: \"Failed to fetch series\" },\n      { status: 500 }\n    );\n  }\n}\n\nexport async function POST(request: Request) {\n  try {\n    const formData = await request.formData();\n    const title = formData.get(\"title\") as string;\n    const slug = formData.get(\"slug\") as string;\n    const description = formData.get(\"description\") as string;\n    const order = parseInt(formData.get(\"order\") as string) || 0;\n    const coverImage = formData.get(\"coverImage\") as File | null;\n\n    if (!title || !slug) {\n      return NextResponse.json(\n        { error: \"Title and slug are required\" },\n        { status: 400 }\n      );\n    }\n\n    let coverImageAsset = null;\n    if (coverImage && coverImage.size > 0) {\n      const imageBuffer = Buffer.from(await coverImage.arrayBuffer());\n      const uploadedAsset = await writeClient.assets.upload(\"image\", imageBuffer, {\n        filename: coverImage.name,\n        contentType: coverImage.type,\n      });\n      coverImageAsset = {\n        _type: \"image\",\n        asset: {\n          _type: \"reference\",\n          _ref: uploadedAsset._id,\n        },\n      };\n    }\n\n    const doc = {\n      _type: \"series\",\n      title,\n      slug: { _type: \"slug\", current: slug },\n      description: description || \"\",\n      order,\n      ...(coverImageAsset && { coverImage: coverImageAsset }),\n    };\n\n    const result = await writeClient.create(doc);\n    console.log(\"[api/series-POST] Created series:\", result._id);\n\n    return NextResponse.json({ success: true, id: result._id });\n  } catch (error) {\n    console.error(\"[api/series-POST] Error creating series:\", error);\n    return NextResponse.json(\n      { error: \"Failed to create series\" },\n      { status: 500 }\n    );\n  }\n}\n"],"names":[],"mappings":";;;;;;AAAA;AACA;;;AAEA,MAAM,eAAe,CAAC;;;;;;;CAOrB,CAAC;AAEK,eAAe;IACpB,IAAI;QACF,MAAM,SAAS,MAAM,oKAAM,CAAC,KAAK,CAAC;QAClC,OAAO,6YAAY,CAAC,IAAI,CAAC;IAC3B,EAAE,OAAO,OAAO;QACd,QAAQ,KAAK,CAAC,2CAA2C;QACzD,OAAO,6YAAY,CAAC,IAAI,CACtB;YAAE,OAAO;QAAyB,GAClC;YAAE,QAAQ;QAAI;IAElB;AACF;AAEO,eAAe,KAAK,OAAgB;IACzC,IAAI;QACF,MAAM,WAAW,MAAM,QAAQ,QAAQ;QACvC,MAAM,QAAQ,SAAS,GAAG,CAAC;QAC3B,MAAM,OAAO,SAAS,GAAG,CAAC;QAC1B,MAAM,cAAc,SAAS,GAAG,CAAC;QACjC,MAAM,QAAQ,SAAS,SAAS,GAAG,CAAC,aAAuB;QAC3D,MAAM,aAAa,SAAS,GAAG,CAAC;QAEhC,IAAI,CAAC,SAAS,CAAC,MAAM;YACnB,OAAO,6YAAY,CAAC,IAAI,CACtB;gBAAE,OAAO;YAA8B,GACvC;gBAAE,QAAQ;YAAI;QAElB;QAEA,IAAI,kBAAkB;QACtB,IAAI,cAAc,WAAW,IAAI,GAAG,GAAG;YACrC,MAAM,cAAc,OAAO,IAAI,CAAC,MAAM,WAAW,WAAW;YAC5D,MAAM,gBAAgB,MAAM,yKAAW,CAAC,MAAM,CAAC,MAAM,CAAC,SAAS,aAAa;gBAC1E,UAAU,WAAW,IAAI;gBACzB,aAAa,WAAW,IAAI;YAC9B;YACA,kBAAkB;gBAChB,OAAO;gBACP,OAAO;oBACL,OAAO;oBACP,MAAM,cAAc,GAAG;gBACzB;YACF;QACF;QAEA,MAAM,MAAM;YACV,OAAO;YACP;YACA,MAAM;gBAAE,OAAO;gBAAQ,SAAS;YAAK;YACrC,aAAa,eAAe;YAC5B;YACA,GAAI,mBAAmB;gBAAE,YAAY;YAAgB,CAAC;QACxD;QAEA,MAAM,SAAS,MAAM,yKAAW,CAAC,MAAM,CAAC;QACxC,QAAQ,GAAG,CAAC,qCAAqC,OAAO,GAAG;QAE3D,OAAO,6YAAY,CAAC,IAAI,CAAC;YAAE,SAAS;YAAM,IAAI,OAAO,GAAG;QAAC;IAC3D,EAAE,OAAO,OAAO;QACd,QAAQ,KAAK,CAAC,4CAA4C;QAC1D,OAAO,6YAAY,CAAC,IAAI,CACtB;YAAE,OAAO;QAA0B,GACnC;YAAE,QAAQ;QAAI;IAElB;AACF","debugId":null}}]
}